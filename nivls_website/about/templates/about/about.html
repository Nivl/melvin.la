{% extends "about/base.html" %}

{% load ssi from future %}
{% load url from future %}
{% load markup i18n staticfiles about_tags %}

{% block "menu-about" %} class="active"{% endblock %}
{% block "page-title" %}{% trans "About" %}{% endblock %}
{% block "page-subtitle" %}{% trans "Where you learn more about me" %}{% endblock %}

{% block "breadcrumb-content" %}
  <li><span class="divider">/</span>
  <li>
    <a data-depth="1" data-ajax="body-content" title="{% trans "About" %}" href="{% url "about" %}">
      {% trans "About" %}
    </a>
  </li>
{% endblock "breadcrumb-content" %}


{% block "header-attributes" %}
  {% if to_pdf %}
    class="hide"
  {% endif %}
{% endblock %}

{% block "footer" %}
  {% if not to_pdf %}
    {{ block.super }}
  {% endif %}
{% endblock %}

{% block "local_css" %}
  {% if to_pdf %}
    <style>
      {% ssi STATIC_ROOT|add:"/commons/css/0/bootstrap.min.css" %}
      {% ssi STATIC_ROOT|add:"/commons/css/20/main.css" %}

        #body-content{
          margin-top: 0px;
        }
    </style>
  {% else %}
    {{ block.super }}
  {% endif %}
{% endblock "local_css" %}


{% block "content" %}
  {% if not to_pdf %}
    <section class="clean-section">
      <h2>{% trans "Welcome to my website" %}</h2>
      <div class="section-content">
        {{ profile.about_me|markdown }}
      </div>
    </section>

    <hr>

    <section class="clean-section-full-size">
      <h2>{% trans "Be social" %}</h2>

      {% for link in contact_links %}
        {% if forloop.counter0|divisibleby:4 %}
          <div class="row">
        {% endif %}

        <div class="span3">
          <div class="big-badge">
            <div class="foreground" style="background-image:url('{{ link.image.url|safe }}');">
              <a {{ link.attributes|safe }} href="{{ link.link }}" style="background-image:url('{{ link.image.url|safe }}');">
              </a>
            </div>

            <div class="informations">
              <h4>{{ link.name }}</h4>
            </div>
          </div>
        </div>

        {% if forloop.counter|divisibleby:4 or forloop.last %}
          </div>
        {% endif %}

      {% endfor %}
    </section>
    <hr />
    <h2>{% trans "C.V." %}</h2>
  {% endif %}

  <article class="accordion clean-accordion main-accordion" id="resume">

    {% for section in cv_sections %}
      <div class="accordion-group">
        <h2>
          <a class="accordion-toggle" data-toggle="collapse"
             data-parent="#resume" href="#{{ section.slug }}">
            {{ section.name }}
          </a>
        </h2>

        <section id="{{ section.slug }}" class="collapse{% if to_pdf %} in{% endif %}">

          <div class="block">
            <div class="container-fluid">
              {% display_cat section.cvcategory_set.all to_pdf %}
            </div>
          </div>
        </section>
      </div>
    {% endfor %}

    {% if not to_pdf %}
      <div class="accordion-group">
        <h2>
          <a class="accordion-toggle" data-toggle="collapse" data-parent="#resume" href="#downloads">{% trans "Downloads" %}</a>
        </h2>
        <section id="downloads" class="collapse">
          <div class="block">
            <div class="container-fluid">
              <div class="row-fluid">
                <div class="span4">
                  <h3>{% trans "Downloads" %}</h3>
                </div>
                <div class="span8">
                  <ul class="element unstyled">
                    <li><a href="{% url "cv_pdf" %}">
                        {% trans "Download this C.V. as PDF" %}
                      </a>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    {% endif %}
  </article>

{% endblock "content" %}
