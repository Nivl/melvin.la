{% load url from future %}
{% load i18n %}

<script type="text/javascript">
function bindPostContactHandler() {
    $('#contact_form form').submit(function() {
        $.ajax({
            type: "POST",
            data: $('#contact_form form').serialize(),
            url: '{% url "contact" %}',
            cache: false,
            dataType: "html",
            success: function(html, textStatus) {
		var form = $(html).find("#contact_form form")
		if (form.text() == '')
		    $('#contact_form form').replaceWith(html)
		else
		    $('#contact_form form').replaceWith(form)

                bindPostContactHandler();
	    },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                $('#contact_form form').replaceWith('<div class="error">{% trans "Your message was unable to be sent at this time. We apologise for the inconvenience." %}</div>');
            }
        });
        return false;
    });
}


$(document).ready(function() {
    bindPostContactHandler();
});
</script>
