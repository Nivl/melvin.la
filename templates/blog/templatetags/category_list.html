

{% for cat in categories %}
  <li>
    <a href="{{ cat.get_absolute_url }}">{{ cat.name }}</a>

  {% if cat.has_child %}
    <ul>
  {% else %}
    {% if forloop.first %}
      </li>
    {% else %}
      {% ifchanged cat.level %}
        </li></ul>
      {% else %}
        </li>
      {% endifchanged %}
    {% endif %}
  {% endif %}
{% empty %}
    <li>No category.</li>
{% endfor %}
